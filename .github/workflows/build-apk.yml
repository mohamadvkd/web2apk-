# .github/workflows/build-apk.yml
name: Build Android APK

on:
  workflow_dispatch:  # ÙŠØ³Ù…Ø­ Ù„Ùƒ Ø¨ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù…Ù† ØµÙØ­Ø© Actions

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯
      uses: actions/checkout@v3

    - name: âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø© Android
      uses: android-actions/setup-android@v2

    - name: ğŸ“¦ Ø¥Ù†Ø´Ø§Ø¡ APK ØªØ¬Ø±ÙŠØ¨ÙŠ (Ù‡Ø°Ù‡ Ø®Ø·ÙˆØ© ØªØ¬Ø±ÙŠØ¨ÙŠØ©)
      run: |
        echo "âœ… Ù‡Ø°Ù‡ Ø®Ø·ÙˆØ© ØªØ¬Ø±ÙŠØ¨ÙŠØ©!"
        echo "Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø±ÙØ¹:"
        find . -type f -name "*.html" -o -name "*.js" | while read file; do
          echo "  - $file"
        done
        # Ù„Ø§Ø­Ù‚Ø§Ù‹ØŒ Ø³Ù†Ø¶ÙŠÙ Ù‡Ù†Ø§ Ø£ÙˆØ§Ù…Ø± Cordova Ù„Ø¨Ù†Ø§Ø¡ APK Ø­Ù‚ÙŠÙ‚ÙŠ
        echo "Ø³ÙŠØªÙ… Ø¨Ù†Ø§Ø¡ APK Ù‡Ù†Ø§ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„."

    - name: ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù ZIP Ø¨Ø¯ÙŠÙ„ Ù„Ù„ØªÙ†Ø²ÙŠÙ„
      run: |
        zip -r web_files.zip index.html js/
        echo "âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø£Ø±Ø´ÙŠÙ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ù„ÙØ§Øª Ù…ÙˆÙ‚Ø¹Ùƒ: web_files.zip"

    - name: ğŸ“¤ Ø±ÙØ¹ Ø§Ù„Ø£Ø±Ø´ÙŠÙ ÙƒÙ…Ù†ØªØ¬ (Artifact)
      uses: actions/upload-artifact@v3
      with:
        name: web-files-archive
        path: web_files.zip
